技术分析能否再金融市场中赚钱, 中国股市弱有效性的实证分析

绪论

文献综述

数据库的构建 3000个股票
回测系统 已经搭建好了
交易系统 简单的
本文的方法做假设检验
scaling

解决很多技术问题

todo: 技术分析的指标, 机器学习与深度学习(半天就能调很多模型出来)
就是假设检验的理论问题, 我可以采用本文的随机化的方法来做. 本文方法的大规模推广, 得出更牢靠的结论.

最后, 如果可以的话, 就是scaling.

最终的结论, 看到底能不能赚钱. 如果可以赚钱, 那毋庸置疑, 中国股市不是弱有效的.

# b字数安排
总30000字
30000
导言 3800字
背景知识 12000字
机器学习与基本分析 3000字
机器学习与技术分析：理论与实践10000字
结论1500字

第一章 导言 （1500字）
    1.1 研究背景
    1.2 本研究的内涵和意义
    1.3 本文结构

第二章 背景知识与文献综述 （7200字）
概述, 基本分析
技术分析（OHLC，蜡烛图）均线交易系统
海龟交易系统 MACD骑墙
这些交易系统并非出自学术圈，但如果是专业化水准的，可能是市场条件通过遗传进化以及类梯度下降算法得到的完善的交易系统。
可以用机器学习来模拟这样的过程。
机器学习（prophet，lightgbm，cnn）
为什么选择机器学习作为有效市场的验证方法？（神经网络）
2.3.3 线性模型的优化：梯度下降与最小角回归
2.3.6 神经的优秀泛化性能（田）
2.3.7 神经网络与决策树的比较
因果推断
有效市场假说
随机游走理论，自相关性检测，技术分析能否赚钱？基金经理业绩
套利定价理论
进化市场假说
中国股市实证研究

第三章 机器学习与半强、强有效市场
    利用公开信息或内幕信息难以盈利，不能作为判断有效性的依据
    脱钩现象：股价脱离基本面
    负油价与破产的套利者
    因子模型
    用更flexible的机器学习方法判断财务(两年)与长期市值是否挂钩 (特征工程)
    实证研究

第四章 技术分析、机器学习与中国市场的弱有效（7000字）
    4.1 技术分析的内涵
        真正的技术分析交易体系
        参数的选择
            格点搜索、随机搜索、模拟退火
        真实世界中的参数迭代
        基于机器学习的贝叶斯优化
        机器学习作为技术分析的调参方法
    4.2 技术分析挖掘的东西（交易行为、心理模式、交易特征）
        工薪阶层定投模型
        随机游走论的弱点（将所有信息认定为是不可知的），除去干扰信息后，股价符合随机游走模型
        广义技术分析与时间序列预测
        用cnn的卷积核挖掘定投特点
        最终的均衡，斜率为常数的直线，将作为市场的无风险利率
    4.3 基于机器学习参数选择方法的技术分析模型（移动平均线、海归交易模型）
        示例：单训练源/单序列股票数据/经典技术分析算法
    4.4 基于机器学习的股价预测模型及衍生出来的交易算法
        示例：单训练源/单序列股票数据/机器学习算法
    4.5 假设检验（时间序列随机化的因果推断）
        零假设, 随机化算法, p值的计算

第五章 实证分析 （3000字）
    4.1 数据来源
    4.2 数据处理细节
    4.3 算法交易盈利能力的检验
        4.3.2 多训练源/多序列股票数据/经典技术分析算法
        4.3.3 多训练源/多序列股票数据/机器学习算法
        4.3.4 多训练源面板数据/多序列股票数据/机器学习算法
        4.3.5 基于深度学习的交易算法
        4.3.6 进一步扩展的设想：技术分析体系蕴含的交易盘感以及机器学习量化数据下的情境信息挖掘
    4.4 实验结果分析
    4.5 中国股市未来是否有效？

第七章 结论与未来工作（1000字）
5.1 关于中国股票市场有效性的讨论
5.2 未来工作


第一章 导言

文献：
何盛明． 财经大辞典： 中国财政经济出版社， 1990
弗雷德里克S·米什金. 货币银行金融市场学[M]. 中国财政经济, 1990.
张亦春, 郑振龙, 林海. 金融市场学[M]. 高等教育出版社, 2008.
周小川. 中国金融业的历史性变革[J]. 中国金融, 2010(Z1):11-16.
何英, 刘义圣. 中国金融市场开放的历史进程和发展路径[J]. 亚太经济, 2018, 211(06):114-121.


1.1 研究背景
金融市场\cite{hesengming1990}是由一系列不同的市场形成的一个庞大的体系，是交易金融工具的场所，结构复杂，种类繁多。包含但不限于票据贴现市场、短期存贷款市场、国库券市场、同业拆借市场、长期贷款市场、股票市场等等，还包括外汇市场、贵金属市场、标准化的商品市场和衍生品市场。
金融市场对于国民经济的发展至关重要，一般认为，金融市场有以下四大功能：
1. 资金融通的通道
2. 可作为衡量经济行为价值的标尺
3. 为管理部门的调控提供介质
4. 提供风险分散与转移
从资金融通的角度来看，金融市场可快速引导资金合理流动。如此，资金会从盈余方流向赤字方，从相对收益率较低的经济人流向相对收益率较高的经济人。金融市场使得投资者的资金有了去向，而资金的需求者，也可支付一定报酬作为成本，获取资金的使用权。以此，提高了资金配置的效率，进而提高经济发展的效率和全要素生产率。
从价值标尺的角度来看，金融市场具备价值发现功能。不论是企业资产，还是大宗商品或农产品，亦或是贵金属，金融市场常常决定了这些产品的价格。如果这个价格与企业的内在价值接近或相同，那么，好公司或好产品，就能获得更多的资金支持，经济向健康发展。反之，如果金融市场的定价不准了，质地优良的公司及其优秀的管理层和员工，则可能难以得到足够的社会资源的分配，导致资源的利用效率下降，进而影响全要素增长率的提高，最终影响到国民的获得感和幸福感。
金融市场的价值发现功能对于国民经济的稳定运行和良好发展发挥着至关重要的作用，本文也将从全新的角度，详细地研究这个问题。
从管理部门进行宏观调控的角度来看，金融市场是良好的政策性工具的施展处。例如，中国人民银行可在银行间拆借市场进行公开市场操作，也可以在境外的离岸人民币交易市场发行或回购央票；美国联邦储备银行则通过联邦基金市场的利率来影响美国经济，乃至于QE，甚至应对covid2019疫情，美联储还会买入公司债券以稳定市场。如果没有金融市场的存在，经济管理当局的政策将难以有效得到贯彻。而实际上，管理当局进行的宏观调控也需要良好的价值发现功能作为支撑，否则，政府救市或调控，则难以把资源投入优秀的公司，不利于经济生态。
金融市场还可实现风险的分散和转移，这与投资者进行risk和return的微观决策和管理提供了帮助。对于每个经济人而言，持续经营与稳定发展都离不开金融市场。以通过支付宝渠道进行销售的天鸿货币基金（又称余额宝）为例，消费者可以只需购买这个货币基金，就可实现远高于活期存款的年化收益率，以及匹配现金的流动性。而对应标的物形成的风险，依据中心极限定理（CLT）则可能由于相互独立而被抵消掉。
从以上对于金融市场功能的分析来看，金融市场良好与健康的发展，需要充分发挥其价值发现功能。在各级金融市场，尤其是资本市场上，需要建立与培养健康的经济生态。资本市场价格这个“经济晴雨表”，需要贴切地反映上市公司的经营质量和管理层的管理能力、职业道德以及公司的社会价值。
没有良好的价值发现功能，资本市场也就很难吸引各类投资主体的参与，同样地，也很难吸引优秀的企业前来发行各类金融工具。没有良好的价值发现功能，市场就难以累积足够的人气，宏观调控与风险转移的功能也就难以实现。
鉴于金融市场价值发现体制机制的重要性，本文将着眼于有效市场假说与金融市场价值发现功能的研究上。

1.1.1 中国金融市场价值发现功能的发展简史
本节将从价值发现的角度来谈中国金融市场的发展。
新中国成立后，人民政府没收了官僚资本主义的银行，并对金融业进行了社会主义改造。在此基础上建立起高度集中统一的国家银行体系。50年代到70年代，中国金融业具有“大一统”的显著特点，高度集中的“大一统”国家银行体系与众多的农村信用合作社相结合是50～70年代中国金融业的最显著特点。
改革开放以来，中国的金融业从“大一统”走向了金融自由化。上海证券交易所、深圳证券交易所以及商品期货、金融期货、黄金、外汇等交易所蓬勃发展，带来了金融市场的空前繁荣。其中，利率曾经长期严格管制，银行体系商业竞争力低下，缺乏活力。同时，资本市场被过度管制，寻租现象时有发生。商品市场交易规则不规范，一系列重大事件体现出金融市场价值发现功能的不完善。
其中，期货市场触目惊心的大型多空对垒就发生了至少几十次。上海327国债期货事件，出现数家机构联手操纵市场，造成交割日当日价格走势大幅波动。尤其是1995年2月23日，空方主力进行大额裸卖，将当日开仓的多头全数打爆，使得327合约暴跌了38元。之后，证监会暂停了国债期货的交易试点，中国第一个金融期货产品夭折，直到十几年后才恢复。
股票市场方面，早期的中国股市的价格发现功能也较为疲软。优秀的公司未必会获得高额的市场估值，而一些热衷于概念炒作，由一些江湖团队进行运作的小公司，却往往走出大行情。在2000年底到2001年初，“庄家”吕梁与深圳某大户勾结上市公司管理层，将一家名叫康达尔的，以养鸡为主营业务的上市公司，包装改造成了“科技+”概念股票，并将公司名称改名为“中科创业”。通过运用资金“坐庄”，将股价建立在了完全的虚无之上。也就是，一方面，吕梁勾结上司公司管理层，操控管理层的消息源；另一方面，吕梁及其手下的多位活跃在各个证券营业部的融资、操盘大员，通过对敲等技术手段，伪造交易数据。在吕梁的操纵下，中科创业的股价一路飙升。1999年7月，中科创业的股价从之前的36元跃升到了45元，到了2000年2月，中科创业的股价上升到了80元。
从今天回望，如果中科创业的操纵市场的团伙不发生内部矛盾，如果那位来自深圳的大户不提前斩仓获利出局，这位“神庄”可能就会在高位成功套现，并最终用剩余的筹码将股价砸下来，以进行下一步操作。
进入二十一世纪之后，中国金融市场走向了更加市场化和规范化的道路。诸如，327国债事件、中科创业操纵市场案、蓝田股份财务造假案以及银广厦财务造假案，这类耸人听闻的现象已经变得越来越少。中小投资者与机构投资者在市场中的占比也在悄然发生变化，国内外基金经理的素质明显提升，相关的财务审计标准，以及交易细则的完善，也有利于金融市场价值发现功能的稳步实现。但是，2013年，中国股市出现了“钱荒”事件，之后的2015年，中国股市发生股灾，场外配资平台的问题浮出水面。
本文则着眼于近3年，中国股市的价值发现功能状况的实证研究，并且，使用机器学习的思想来做到这一点。

1.2 本研究的内涵与意义
本文将从价值发现这样一个对金融市场而言极其重要的功能入手，重新审视有效市场假说。结合统计机器学习、深度学习和因果推断的方法，提出一套全新的论证市场有效性的测试体系和判断逻辑。
本文将以一个全新的角度，审视有效市场假说。思考作为一个市场参与者究竟应该做什么，才能稳定而长期的盈利，并且创建一个良好的市场生态环境。本文将提供一种新的思维方式，以替代将市场视作随机游走的这样一种思维，从机器学习的角度理解金融市场，不失为之前学说的补充。本文还将提供一些政策性的建议，讨论金融市场有效性需要哪些政策支持。

1.3 本文结构
本文将按如下结构来书写。
第1章是导言，阐述中国市场的定价问题，以及概述本文的内涵与意义。
第2章将介绍本文的背景知识以及综述文献，包括，股市交易的基本分析知识和技术分析知识、机器学习、深度学习、因果推断、有效市场假说以及有效市场假说在中国股市上的实证研究。
第3章则分析随机游走学说的弱点，提出一套基于机器学习和数据挖掘的市场有效性判断框架。
第4章主要分析基本分析派在市场中的作用，并运用机器学习和数据挖掘的方法论来进行中国股市有效性的实证研究。
第5章则讲述技术分析派的真正贡献是什么，并构造了一个模型来说明这一点。
第6章讲述本文最终实证研究所使用的模型与方法。
第7章则是以本文之前提出的到家，对中国股市的有效性进行分析。本章还会提出一个新的基于机器学习的学习器与优化过程的市场定价理论。
第8章的内容是结论与未来工作。

2 （7200字） 背景知识与文献综述

# 文献
李向科. 证券投资技术分析[M]. 中国人民大学出版社, 2000.

2.1 股票市场（500字）

2.1.1 股票市场概述
股票（stock）[lixiangke2000] 是股份公司发行的所有权凭证，股票持有者享有从股票发行的股份公司取得股息，以及在公司的最高权力机构——股东大会上投票的权力。股票也是一种金融工具，是资本市场上主要的长期信用工具，对标的公司享有剩余价值，但不得要求发行公司返还出资。
股票市场就是用来买卖股票的场所。股票市场分为交易所和场外交易两大类。我国目前存在上交所和深交所两大交易所，同时也有三板市场，创投市场等多种买卖股票的场所。一般认为，股票市场分为发行市场和交易市场。
发行市场常常被称为一级市场，一般来说，是指股票首次公开发行（Initial Public Offering）时，股民或机构的认购交易，属于一级市场的交易。一级市场的交易，常常由投资银行或证券经纪人予以承销或分销，在我国，上市公司IPO发行的股票，常常以略低于市场价值的价位确立为中签价。随后，投资者可根据存量股持有量和投资资金量及其他规则，来确定中签几率，最后，凭借随机抽签的结果，来确定股票的最终出售对象。
二级市场则是指已发行的有价证券买卖流通的场所，是转让有价证券的地方。我国的深交所、上交所设有多个二级市场交易版块，交投活跃。日交易量平均达到5500亿人民币作用。二级市场的存在，为股票的持有者提供了充足的流动性。同时，二级市场的定价功能的优劣，也成为了一级市场发展，乃至相当程度的实体经济发展的一个根本指针。本文将从机器学习的视角出发，详细研究股票市场的价值发现功能，归根结蒂研究的对象是二级市场交易价与股票实际价值之间的关系问题，这个问题也可以被定义为股票市场有效性问题。

## 文献：
赵黎明, 吴文清. 科技企业孵化器与创投合作治理及政策研究[M]. 中国经济出版社, 2013.
Wu V, Gnanasambandam C. A machine-learning approach to venture capital[J]. The McKinsey Quarterly, 2017.

2.1.2 股票市场与实体经济的关系
股票市场与实体经济关系密切，
一级市场常常被认为是股票市场的起点，但实际上，多数公司的起点并不是一级市场。一个创业公司，常常是由创业合伙人投资组成。合伙人自掏腰包，或从家人、亲戚、朋友处筹集资金，是为种子轮。之后拿到的第一笔融资，常常被称为天使轮（Angel Investment）。天使轮往往是大型资本的富有远见的运作，这部分资金承担了创业的高风险，如果创业失败，这批资金将遭受损失，不过，承担高风险的同时也会享受创业成功后的高收益。如果创业成功，天使轮的投资将获得极高倍率的回报。种子轮以及天使轮之后，初创公司往往还要经历多轮融资，每一轮的融资金额次第上升，而投资者的最终的回报也会逐渐降低，但风险也会相应下降。最终，初创公司的部分团队，以及为初创公司提供帮助和弹药的创业投资资本，将需要一个提供合理报价和估值的股权交易市场来退出，为他们对社会做出的贡献索取合理的报酬。初创公司各方的退出通道，往往需要公司进行首次公开发行，因此，一个成熟、价值发现功能完备的股票市场，对于一个国家或经济体系的发展来说，常常是不可或缺的。

下面我简单用机器学习（machine learning）的视角，来谈天使轮投资中，初创企业与创投基金或了不起的自然人投资者之间的互利关系。
天使轮企业需要有详尽的创业计划和业务计划。而对天使轮进行投资，需要专业机构进行《尽职调查报告》（due diligence report），也称DD。经过种子轮的投资，一家企业可能从萌芽状态开始生长，而专业机构将对一大批萌芽企业进行遴选，以专业的视角支持或拒绝一大批企业。优秀的企业将继续存活，而资质欠缺的企业，或许以小企业的身份固守一个较低的生态位，也可能被市场所淘汰。
从机器学习的视角来看，天使轮常常意味着专业投资机构对企业信息的第一轮挖掘。[Wu2017] 描述了一种数据分析模型，这种模型可以让风险投资基金更好地把握早期初创公司的价值，以做出更加正确的投资。Wu解释了中国和美国在科技创业公司方面的差异问题。他提出的这项数据驱动型的判断模型显示出了良好的效果。
但风险投资者与创业者的关系，有时又往往是双向的。创业者常常会得到风险投资者不限于资金支持的帮助。风险投资资本常常会派遣人力前往支援，或提供一些物力上的帮助。因此，风险投资者除了对创业者进行了数据挖掘，筛选出了优秀的创业者并支持他们的发展，同时淘汰了不够有利于社会经济发展的创业者，还可能深度参与经营活动，为创业者提供指导，增强了新兴的经济活动的活力。

我国的多种经济成分内，有相当数量的大型企业，是由上文所述的方式予以孵化、成长的。遗憾地是，截止到本文撰写，大量的国内新兴高科技或互联网企业所以来的股票市场是美国纳斯达克股票交易所，或者香港联交所，而不是我国的深圳证券交易所或者上海证券交易所。从以上模式孵化而出较著名的企业有美团点评（联交所代码：03690）、京东（纳斯达克代码：JD）、阿里巴巴（纳斯达克交易代码：BABA）等等。随着瑞幸咖啡的财务造假事件发酵，中概股在美上市所产生的诸如VIE结构、审计程序等种种问题开始被关切，如果我国自身的股票市场的成熟度可以接纳这些优秀的公司，那么，也一定可以吸收和利用来自全世界的聪明的资金，从而一举解决中概股异地上市所产生的各种问题。本文研究中国股市的有效性，正是因为其对于我国经济发展是至关重要的。

我国内地还有多种不同性质的公司，通过多种途径上市。例如，地方国资委可以通过国有企业改制的方式，将一些明星资产打包整体上市，从而拥有上市公司平台，起到扩大市场规模和影响力，背书增信的积极作用。我国股市对于我国金融体系的稳定，规范金融公司的经营，提升效率，缓解金融抑制也做出了相当的贡献。限于篇幅，本文就不再一一分析。

总之，我国股市与我国经济的平稳较快健康的发展关系密切。

# 文献
陈共, 周升业, 吴晓求. 中国证券业从业人员资格考试系列教材 第四分册 证券投资分析——风险管理·基本分析·技术分析[M]. 中国人民大学出版社, 1996.
张琛. 证券投资基本分析及量化交易指标的应用研究[J]. 经营管理者, 2015(09):26-27.

2.2 基本分析与技术分析（1000字）
2.2.1
基本分析（fundamental analysis），国内又叫基本面分析，是指投资者主要通过分析上市公司的盈利能力，估算其内在价值（intrinsic value）。基本分析派的投资者，常常根据这个内在价值来确立交易动作，以获得盈利。
基本分析中的内在价值，可以定义为未来现金股利的折现。
$$ price=\frac{d}{r} $$
基本分析的目标很简单，一方面是准确预测公司的未来盈利情况，另一方面则是把握未来利率变动情况。由此，基本分析常常包含以下内容：
（1）宏观分析
侧重于研究国家经济发展政策，以及以国家或区域经济（新兴市场、成熟市场、金砖四国等等）作为分析对象，判断一个经济体的健康状态和经济发展的阶段，从而进行宏观方向上的投资，和资产全球化的配置。
（2）行业分析
行业分析侧重于分析行业盛衰周期，行业技术的未来走向以及行业整体的发展状况。
（3）公司分析
公司分析则分为很多种，最简单的就是业绩分析。投资者通过分析公开的财务报表数据，通过计算一些会计比率，阅读会计报表附注等方式，选择财务指标优秀的公司。这也是我国市场上最常见的“基本分析派”。因为我国金融体系的特殊性，我国的银行股常常以较高的杠杆率和较低的市盈率出现在股票市场之中，这些银行股业绩优良，市盈率低至4到5之间，吸引了大量此类“基本分析派”投资者的购买。
但以上基本面分析又不足以概括基本面分析的全貌。我国市场中，并购重组和高送转也是炒作热点。一些水平很高的股民，往往反而喜欢购买垃圾股。所谓垃圾股，就是主营业务开展不顺利，难以保持增长，甚至已然亏损，面临退市风险的股票。炒作垃圾股的逻辑很简单，因为，垃圾股的市值低至10亿，而由于我国的IPO发行制度非常严格，通过重组完成上市，可能存在政策套利的空间。根据估算，一个上市公司的壳价值超过30亿，由此产生了垃圾股玩家的盈利空间。
从传统的角度很难全面理解基本分析，例如，近期美国浑水基金做空瑞幸咖啡的报告中，他们派遣全职或兼职的员工上万人蹲守瑞幸咖啡店，通过视频取证，最终得出了瑞幸咖啡销售数据造假的结论。最终，在浑水公司的做空报告发出三个月后，瑞幸股价暴跌，通过衍生工具或合约做空该股的投资者获得了不菲的收益。
从机器学习的角度，则可很好的理解与解释基本面分析，以及基本面分析对于市场的作用。在机器学习（或称学习）的视角下，进行基本分析，实际上是一个数据挖掘的过程，或者更广义地说，是一个信息挖掘的过程。投资者通过对基本面信息进行分析和解读，形成了自身对于股票所代表的剩余权益的价值的预测，最终，通过这个预测来制订投资计划，以从市场中获利。如果投资者从难以计量的信息中，挖掘出了有价值的情报，并最终转变成了准确的预测，那么，在一个讲理（reasonable）的市场内，至少在一个部分理性的市场里，投资者获取超额报酬的可能性就是很大的。


# 文献
维克托·斯波朗迪. 专业投机原理:珍藏版[M]. 机械工业出版社, 2010.
骆双骏. 基于深度学习的黄金期货价格预测[D]. 兰州大学, 2017.
陈芳芳. 基于支持向量机的股票价格预测研究[D]. 重庆理工大学, 2016.
Patel J , Shah S , Thakkar P , et al. Predicting stock and stock price index movement using Trend Deterministic Data Preparation and machine learning techniques[J]. Expert Systems with Applications, 2015, 42(1):259-268.

2.2.2 技术分析
[weiketuo2010] 所写的《专业投机原理》被称为技术分析派的圣经。技术分析源自精干的投资者丰富的市场经验和总结。早在19世纪，法国金融家E.Degas就开始使用技术分析来赚钱了，他的做法极其简单。针对纷繁的交易报价，他设定了一个高价位和历史低价位，依据的手法类似统计学中的分位数（quantile）。当交易标的物的价值跌破低价时，Degas先生就会买入，反之，交易标的物涨破高价后，Degas先生则会卖出。通过这套简单的方法，这位金融家赚取了大量金钱。
彻底的技术分析派信仰以下信条：
（1）股价或交易标的的价格包含了一切相关的信息
（2）价格变动有趋势
（3）历史会重演它自己
那么，以上信条是难以从学术层面进行讨论的。那么一般认为，技术分析是指通过研究市场信息，并以为根据而创造交易决策系统的过程。技术分析又称场内交易派，这一派的交易员会利用挂牌价格信息、成交量信息、详单信息、席位信息、大宗交易信息等等，进行综合判断。
狭义的技术分析的主要依据是蜡烛图（candle chart），中国大陆境内也称为K线图。从数据的角度来说，蜡烛图的形状依赖于4个数据，分别是开盘价（open）、收盘价（close）、最高价（high）、最低价（close），也可简称为OHLC数据。
【图】
根据OHLC数据可以衍生出大量的交易系统，这里只举一个简单的例子。
双均线策略只要应用历史收盘价来构建交易决策。
一个朴素的双均线策略的生成算法如下：
（1）规定 $$\mathbf{MA}_1=(1/m)\sum_{i=t-m-1}{t-1}p_i $$
(2) 规定ma2
（3）t=some 历史时期 到现在
        如果ma1上穿ma2 则全仓买入
        如果已经全仓买入 且 ma1下穿ma2 则全仓卖出
（4）重复（3）并调整ma1和ma2的周期，直到满意
ma1和ma2的参数通常是用网格搜索（grid search）的办法来确定，亦可使用模拟量子退火（simulated annealing）来找到合适的参数。从以上可以观察到，技术分析在市场的竞争和调节下，也可能与某些机器学习的算法具备同样的特征。
那么，以机器学习的角度来说，技术分析派利用市场数据作为信息集，策略骨架为模型，而策略的具体参数可以理解为模型的系数。
【todo 式子】
可以将双均线交易算法中的周期类比一元线性回归模型中的beta，而找寻周期大小的过程可理解为机器学习中的各种基于成本梯度下降的算法。
而相较蜡烛图版的较原始的技术分析，机器学习的视角则可更进一步。[chenfangfang2016]将MACD、RCI、OBV等传统技术分析产生的指标作为特征引入到支持向量机（SVM）之中，随后进行预测，产生了较好的效果。[patel2015]则比较了SVM、人工神经网络（ANN）、随机森林（random forest）以及朴素贝叶斯（naive-Bayes）对股票指数进行预测的效果，并认为随机森林的效果是最好的。该研究也使用了10个传统技术分析产生的指标。值得一提的是，[luoshuangjun2017]利用长短时记忆网络(LSTM)，在蜡烛图的OHLC特征以外，还引入了多个相关的特征，提高了对黄金价格预测的准确率，该研究将更为强大的循环神经网络（RNN）引入了进来，并产生了优秀的效果。

# 文献
Lecun Y , Bengio Y , Hinton G . Deep learning[J]. nature, 2015, 521(7553):436.
Ian Goodfellow, Yoshua Bengio, Aaron Courville. Deep Learning[M]. The MIT Press, 2016.
周志华. 《机器学习》[J]. 中国民商, 2016(3).
Hastie, Trevor J. The elements of statistical learning[M]. 世界图书出版公司, 2015.
Bishop C . Pattern Recognition and Machine Learning[M]// Stat Sci. 2006.
Sabour S , Frosst N , Hinton G E . Dynamic Routing Between Capsules[J]. 2017.
Kosiorek A R , Sabour S , Teh Y W , et al. Stacked Capsule Autoencoders[J]. 2019.

2.3 机器学习与深度学习
21世纪以来，随机计算机的普及以及信息化建设稳步的推进，统计问题开始的复杂性和规模日益扩大。数据存储、数据组织、数据仓库以及数据分析的新要求使得一门叫做“机器学习”的新学科从统计学中分离了出来。在应用层面，机器学习是一门数据的科学，因此也被称为“数据挖掘”（data mining）。在各行各业以及各种各样不同的领域，大量的数据被不断的产生，也为统计科学提出了新的要求和挑战。
按照是否存在训练标签或目标来进行分类，机器学习分为两种：第一种叫监督学习（supervised learning），另一种叫无监督学习（unsupervised learning)。常见的无监督学习有：聚类、异常值检测和降维。截止本文撰写，研究界对于非监督学习的效果提升非常大，[kosiorek2019] 在2019年提出了一种非监督的胶囊自编码器（unsupervised capsule autoencoder)，这样的自编码器对于内含信息量大，信息蕴藏丰富的数据集，效果是非常优秀的。
MNIST手写数字（handwritten digits）数据集是机器学习领域最为常见的传统数据集，至90年代末，MNIST依旧是学界研究的重点。如今，MNIST数据集多用于教学案例。这个数据集含有6万余条样本，每一个样本都是一个人类的笔迹，且代表一个从0到9的数字。数据科学家需要编写机器学习算法来找到其中的规律，以正确识别手写字对应的数字。
[kosiorek2019]的非监督胶囊自编码器并未使用标签数据，仅仅通过无监督学习，便在MNIST数据集上获得了高达98.7%的正确率。我的实验表明，经典线性回归（OLS）可在MNIST获得80%的准确率，广义线性回归则可以获得91.5%的准确率。传统机器学习模型中，使用经过良好的参数调整的K最近邻模型（k-Nearest Neighbor）分类算法，可获得接近98%的准确率。而使用卷积神经网络（LeNet5是其中一种）则可获得超过99%的识别准确率。
对比而言，[kosiorek2019]文中提出的非监督胶囊自编码器获得了98.7%的识别正确率，这超过了绝大多数传统机器学习模型使用了样本标签的识别准确率。可见，无监督学习的发展迅猛，技术日新月异，迭代迅速，效果优良。

2.3.1 监督学习与回归分析
机器学习领域截止到本文编写，更重要的问题被称为“监督学习”（supervised learning）。从统计学出发，我们将监督学习描述为从输入（input）到结果（outpu）的过程。不过，在机器学习各个不同领域的文献中，输入（inputs）和结果（output）又有多种表示。传统的模式识别领域中，输入又被称为特征（feature），对输入的修正与构建又被称为（feature engineering），而结果有时也被称为（response）。从统计研究的角度出发，输入又被称为自变量，输出或结果又被称为因变量。在本文范畴内，一般简单使用输出（input）或者特征（feature），来指代$X$，用结果（output）、目标（target）等等来指代$Y$。本文中的监督学习问题均属于回归分析（regression analysis）范畴。
机器学习中的回归分析属于预测分析的一种，与推断（inference）有一定的概念区别。它的研究范围是：如何从自变量出发，预测因变量的数值。简单的回归预测分析的方法有线性回归（ordinary least sqaure）、多项式回归（polynomial regression)、近邻回归（neareset neighbor）、决策树（decision tree）等等。
[hastie2015][bishop2006] 涵盖了大量机器学习的基础知识以及作者对于机器学习的深刻理解。传统的机器学习又深刻影响了深度学习算法的诞生和发展，这里，我将用最简单的语言，叙述简单的线性回归以及本文所用的深度神经网络模型。最终，我将说明我为什么要选择基于神经网络的深度学习模型作为研究市场有效性的工具。
[#todo 机器学习训练集与测试集]

2.3.2 线性模型
我先介绍最简单的机器学习算法——线性回归。
[线性回归 式子 #todo，问题，损失函数，权重]
[MSE 64esl]
从统计机器学习的角度，均方误差实际上是一个负对数似然（negative log-likelihood），假设误差服从独立同方差（isotropic）的多维高斯分布，MSE与NLL的差别仅仅是常数。
将MSE最小化，假设X是满秩的，我们可以求得其解析解。可以证明，OLS解是BLUE。

将MSE最小化，经典的机器学习教材往往基于矩阵计算求其解析解[hastie2015]和[bishop2006]。由于矩阵的数值计算技术经过了长期技术迭代，性能优良，优化好，传统的基于cholesky分解的数值线性代数计算迅速而精准。
不过，本文将从另外一个角度来思考简单的经典最小二乘问题。

2.3.3 方差与偏差：模型选择
机器学习算法常常会遇见过拟合（overfitting）的问题，一定程度上，机器学习专家时刻都在与过拟合做斗争。理解模型的能力（capacity）、过拟合（overfitting）和欠拟合（underfitting）对于进行正确的模型选择至为重要。
机器学习被广为诟病的弱点是过于地数据驱动（data-driven）了。机器学习的算法，尤其是诸如人工网络、梯度增强决策树等高能力模型，常常可以良好的拟合训练模型，甚至，在预测目标为分类数据的时候，还可以完美地拟合模型。不过，当训练后的模型遇见新（previously unseen inputs）的输入，模型是否还可以发挥出强大的预测能力呢？对于未见过的新样本的预测能力又被称为模型的泛化能力（generalization）。
[#todo 训练误差， 测试误差，泛化误差，VC维]
最终，对机器学习算法的应用的核心是降低泛化误差，对此，常常需要降低模型的复杂度。VC维（Vapnik-Chervonenkis Dimension）的概念从理论上定义了有关函数集的学习性能的一种重要指标。不过Vapnik-Chervonenkis维理论给出的泛化误差的下界较为宽泛，应用于实践有一定难度。
统计机器学习领域，我们有多重实践方法用于可以用于降低泛化误差，提升泛化能力。最常见的方法就是对目标函数增加多种惩罚项（penalty），使得模型在依据新的目标函数进行优化的过程中，除了追求较小的准确性方面的损失以外，还可以降低模型复杂度，从而防止过拟合的产生。岭回归（Tikhonov regularization）就是一种添加了新的惩罚项的最小二乘估计方法，这种回归方法对于系数的大小的$l_2$范数进行了惩罚，防止模型出现过拟合。最小绝对值压缩和选择运算器（LASSO）是一种变量选择的方法。这个方法通过构造一个$l_1$的惩罚函数来改变了模型优化的目标函数，使得模型在这个目标函数的优化的过程中，某一些系数会被压缩到0，从而达到了选择变量的目的。
除了$l_1$或$l_2$这类最为常见的惩罚项之外，还有但丁选择器（Dantzig selector）、光滑地截断绝对偏离（smoothly clipped absolute deviation）等方法来增加模型的泛化能力。
一般来说，以上惩罚回归方法都是以牺牲训练样本的准确性为目的，因此，在传统的偏差（bias）与方差（variance）选择问题中，通常认为，模型能力（capacity）越强，则偏差较低而方差较高，反之，模型能力越弱，则偏差较高而方差较低。不过，本文所使用的机器学习预测方法是基于梯度增强模型（gradient boosting）与深度学习（deep learning）的，在梯度增强模型、深度神经网络的实践过程中，强能力模型也可能拥有极强的泛化能力，而表示能力较弱的模型，也可以拥有更为不佳的泛化能力。本文的第三章的理论部分，将从现代的观点来剖析偏差与方差的选择问题，以及详细阐述我为什么选择使用强表示能力的模型来研究中国股票市场的有效性。


@inproceedings{ke2017,
	title="LightGBM: a highly efficient gradient boosting decision tree",
	author="Guolin {Ke} and Qi {Meng} and Thomas {Finley} and Taifeng {Wang} and Wei {Chen} and Weidong {Ma} and Qiwei {Ye} and Tie-Yan {Liu}",
	booktitle="NIPS'17 Proceedings of the 31st International Conference on Neural Information Processing Systems",
	pages="3149--3157",
	year="2017"
}

2.3.4 lightgbm
梯度增加树以决策树作为基础学习器（learner），并运用集成学习（ensemble learning）中boosting的方法进行效果加强。
决策树实质上是对训练集进行划分，并将每个划分对应一个输出（output）的算法。决策树的实现有多种方法，但都是贪心算法，找到的是局部最优。同时，决策树的模型一致性（model consistency）天生不佳，从机器学习的哲学上来说，在决策树所确定的各个划分的边界处，差距很小的两个样本也可能产生迥异的结果。因此，单个的决策树的预测性能偏弱，但决策树的优势在于其具备良好的解释性。
就预测能力而言，决策树的精准度与其他优秀的机器学习模型是无法相提并论的。不过，根据集成学习的原理，我们可以将相对弱小的一系列元模型进行堆叠、组合，可达到减小方差和偏差，或者说，直接提升预测能力的效果。常见的集成学习原理有装袋（bagging）和boosting。基于装袋的集成学习方法，我们可以将单个的决策树集成为随机森林（random forest）。随机森林可以显著降低模型的预测方差，也可以理解为，随机森林可以让对训练集的划分光滑化，因此，可提升模型的一致性。
本文将采用lightgbm[ke2017]模型作为主力预测的基于树模型的模型。GBDT（gradient boosting decision tree）拥有多种优秀的实现，比较著名的有Xgboost、CatBoost和本文使用的lightgbm。lightgbm可以灵活处理分类型特征以及连续型特征，引入了直方图（histogram）结构，也就是说，lightgbm会把连续型的特征转化为直方图。因此，相较于同类算法，lightgbm需要更小的内存空间。
同时，lightgbm的生成树策略也与同类算法有所普通。同类算法常常使用level-wise的方式生成单个决策树，这种方法有利于防止过拟合，但会浪费一定运算资源。而lightgbm使用了leaf-wise作为生成树的策略。一般来说，使用level-wise或leaf-wise的方式是有利有弊的，但因为lightgbm使用了直方图等特征处理方法，这些方法与leaf-wise的策略进行组合就产生了更高的效率和精度。lightgbm对于多线程运算也提供了良好的支持，因此，运算速度很快。比同类的先进的Xgboost要快得多。由于本文需要采用多种机器学习的方法，运用于1600多支股票数据之上，总数据量达到200万条以上，因此，我对于运行速度有一定要求。

2.3.5 LSTM
# gtd



2.3.6 神经网络简介：循环神经网络与时间序列分析


# todo 式子





因果推断（1000字）

# 文献
[1]周孝华,宋庆阳,刘星.适应性市场假说及其在中国资本市场的实证[J].管理科学学报,2017,20(06):111-126.
[1]杨璇. 比特币市场的有效性检验与价格预测[D].华中师范大学,2019.
Lo A W． Ｒeconciling efficient markets with behavioral finance: The adaptive markets hypothesis[J]． Journal of Investment
Consulting，2005，(2):21-44．
Fama E F , French K R . Common Risk Factors in Returns on Stocks and Bonds[J]. Journal of Financial Economics, 1993, 33(1):3-56.

三因素模型

有效市场假说（1000字）

fama #todo 待补充。1970
### 随机游走
但是，不管是学术研究还是市场实际操作，大量背离有效市场假说的现象不断涌现。
行为金融将研究的侧重点立于心理学和人类行为，似乎人类的投资行为不是出于理性的。
# todo 行为金融

适应性市场假说
[zhouxiaohua2017]
通过动态市场市盈率等多个角度，研究了适应性市场假说是否可解释中国股市的实践问题。认为适应性市场假说对比于传统的有效市场假说（EMH）更能合理地解释中国资本市场发生的种种现象，包括，市场效率的动态变化、市场无效与金融风暴之间的关系以及技术分析策略的绩效的时间不稳定性。
[Lo2005] 灵感激发于生物学中的进化论以及金融学中的理性概念，提出了适应性市场假说（adaptive markets hypothesis）。
这个假说从进化论的角度，从学习、适应和竞争等方面来剖析市场。主要观点有：1 市场玩家会学习、适应和进化 2 竞争是适应或进化的原因 3 引入了达尔文朴素进化论中的自然选择概念 4 市场最终形态由进化所决定
AMH相对于EMH提出了很多新观点，较之EMH也更为贴合市场实际。例如，AMH认为市场在不断进化，套利机会将持续存在，思维创新将是生存的关键。
# todo 补充



本文所提出的基于机器学习视角的市场有效性研究方法，灵感激发于传统的有效市场假说。适应性市场假说的部分观点，与我的研究恰好契合，但AMH没有真正解释市场的具体作用，以及市场与外部经济信息之间的关系问题。

中国股市实证研究（1000字）
# todo 补充
EMH
行为金融学
适应性市场假说

第三章 随机游走的弱点及基于机器学习视角的市场有效性判断
# todo

通过是否符合随机游走现象，能否判断市场有效性？
自相关与定投模型
一些实例：百家乐模型、负油价与破产的套利者
将市场视为数据挖掘器，将无法轻松挖掘可盈利信息，作为市场有效性的判断标准

# 文献
Snoek J , Larochelle H , Adams R P . Practical Bayesian Optimization of Machine Learning Algorithms[J]. Advances in neural information processing systems, 2012, 4.
贝叶斯优化
孙碧波, 方健雯. 对中国证券市场弱态有效性的检验——基于技术分析获利能力的实证研究[J]. 上海财经大学学报, 2004(06):53-58.
林丽佳, 孙得将. 技术分析中双移动平均线交叉信号在A股市场的有效性分析[J]. 时代金融, 2019(23).
徐文博. 技术分析在中国A股市场的有效性分析[J]. 进出口经理人, 2016, 000(001):63-64.
Bojinov I , Shephard N . Time Series Experiments and Causal Estimands: Exact Randomization Tests and Trading[J]. Journal of the American Statistical Association, 2019:1-36.
Silver, D., Huang, A., Maddison, C. et al. Mastering the game of Go with deep neural networks and tree search. Nature 529, 484–489 (2016). https://doi.org/10.1038/nature16961

第四章 技术分析、机器学习与中国市场的弱有效（7000字）
    4.1 技术分析的内涵
        真正的技术分析交易体系
        参数的选择
            格点搜索、随机搜索、模拟退火
        真实世界中的参数迭代
        基于机器学习的贝叶斯优化
        机器学习作为技术分析的调参方法
    4.2 技术分析挖掘的东西（交易行为、心理模式、交易特征）
        工薪阶层定投模型
        随机游走论的弱点（将所有信息认定为是不可知的），除去干扰信息后，股价符合随机游走模型
        广义技术分析与时间序列预测
        用cnn的卷积核挖掘定投特点
        最终的均衡，斜率为常数的直线，将作为市场的无风险利率
    4.3 基于机器学习参数选择方法的技术分析模型（移动平均线、海归交易模型）
        示例：单训练源/单序列股票数据/经典技术分析算法
    4.4 基于机器学习的股价预测模型及衍生出来的交易算法
        示例：单训练源/单序列股票数据/机器学习算法
    4.5 假设检验（时间序列随机化的因果推断）
        零假设, 随机化算法, p值的计算


通过对技术分析等交易策略的盈利能力的研究来分析判断一个金融市场的有效性的方法，在[fama1970]的综述中，就已经被提及了。该综述总结了研究者对道琼斯工业指数施加交易算法所产生的效果。其中，有一种叫百分比滤波（y% filter）的交易算法被认为是被彻底研究了的。这个简单的交易算法是一个追涨杀跌的模型，这个模型做多的部分是按以下描述进行操作的：当股票上涨了百分之y，则选择高位买入。等到股票从最高点回撤百分之y时，再选择卖出。这里的$y$是一个可调的参数，合理的$y$似乎可以构造一个可盈利的系统。国内的研究方面，[sunbibo2004]通过分析三种技术分析策略的盈利能力来分析中国股票市场的有效性。[linlijia2019][xuwenbo2016]对移动平均线策略在中国A股市场的盈利能力进行了研究，但这些研究均没有很好的理解市场环境下真实的技术分析的本质。
[chenfangfang2016]将MACD、RCI、OBV等传统技术分析产生的指标作为特征引入到支持向量机（SVM）之中，随后进行预测，产生了较好的效果。[patel2015]则比较了SVM、人工神经网络（ANN）、随机森林（random forest）以及朴素贝叶斯（naive-Bayes）对股票指数进行预测的效果，并认为随机森林的效果是最好的，该研究也使用了10个传统技术分析产生的指标。
本文将从机器学习的视角来重新结构技术分析的内涵，并提出一个全新的基于机器学习和人工智能（artificial intelligence）的技术分析交易模型。本章将逐步介绍这样一种交易算法，以及最终判定该交易算法是否有效的，涉及时间序列随机化因果推断的方法。

4.1 机器学习视角下的技术分析的内涵
市场条件下的技术分析是一个博大精深的复杂系统，既可以对市场的涨跌进行判断，具备一些实用的交易价值，同时也是一种文化现象。因此，不能将技术分析简单地归结为几个指标。例如，有一种技术分析的交易方法称之为炒单。炒单的意思是，交易者完全凭借自己脑海中复杂的神经网络系统，根据市场上盘口数据的信号，直接依赖直觉捕捉交易机会，以博取差价。技术高超的炒单员可能积少成多、聚沙成塔，达到稳定盈利。对于高频交易，如果下单才能快速稳定，以及如何才能隐藏交易信息，这是各大交易机构所关心的问题。[Bojinov2019]通过构造随机化测试和因果估计目标（causal estimand）比较了量化投资基金中，人工交易下单与程序化交易下单的优劣，其中的人工下单所依赖的，就是人脑对于复杂环境的直觉性判断。
技术分析是精明的投资者对于股价长期变化进行观察积累的理论化了的经验，从机器学习的角度来进行分析，技术分析无外乎对金融市场中的历史交易数据进行数据挖掘。
我可以从机器学习的视角来对一个合格的技术分析流程进行解读：
1 特征提取
这一步的核心意义在于对以往的时间序列（time series）数据进行特征提取，常见的特征分为很多类。其中，属于技术指标的是：均线（MA）、相对强弱指标（RSI）、随机指标（KDJ）、平滑异同移动平均线（MACD）、能量潮（OBV）等。
属于形态类的有：M头、W底、圆弧底、头肩底、红三兵、三只乌鸦、仙人指路等等，形态类利用的数据实质上是OLHC蜡烛图数据。形态类的特征还有波浪理论，波浪理论通过对之前行情的“波浪”进行计数，以判断当前牛市（或熊市）的绝对位置。
均线类的技术指标也可绘制成副指标图，形成了多头排列、空头排列、金叉、死叉等被技术分析派认为反映了市场多空力量对比的特征。
技术分析者研究得出的技术分析特征具有一定价值，[chenfangfang2016]引入机器学习的方法分析MACD、RSI等传统技术分析形成的特征，最终获得了较好的效果。但之前的研究对于技术分析的理解也囿于这些特征，需要注意，仅是特征提取并不能完整地囊括技术分析的所有流程。
2 特征选择
第二步，技术分析者会根据自己的经验和见闻构造属于自己的交易系统。以上所列的一系列技术分析特征，最终被保留很少的部分，以作为技术分析者使用的交易系统的基石。需要注意，简单的交易系统往往是特定市场环境下，经过技术分析玩家长期的市场实践，优胜劣汰留下的系统，其涵义与研究者随机抽取的交易系统存在区别。因为，长期市场的优胜劣汰实则为交易系统的演进提供了温床。
3 交易系统的打磨
本文第二章已经提及，一个朴素的双均线策略应当包含对ma1和ma2周期的动态调整步骤。而自[fama1970]以降，大多数研究对于技术分析的设定和定义都是参数静态的。而实际市场中，对于参数的调整也是技术分析交易系统的一部分，甚至，可能是比交易系统本身更为重要的一部分。不调整参数的技术分析交易模型，就像是未经精调（fine-tuning）的深度学习模型，其效果不能代表技术分析的真正实力。
一个朴素的双均线策略的生成算法如下：
（1）规定 $$\mathbf{MA}_1=(1/m)\sum_{i=t-m-1}{t-1}p_i $$
(2) 规定ma2
（3）t=some 历史时期 到现在
        如果ma1上穿ma2 则全仓买入
        如果已经全仓买入 且 ma1下穿ma2 则全仓卖出
（4）重复（3）并调整ma1和ma2的周期，直到满意
对于ma1和ma2的参数调整，最简单的方法是栅格点搜索（grid search）。栅格点搜索的具体方法是，给ma1设定一个范围，例如，从1到50；给ma2页设定一个范围，例如，从80到250。然后，可以让ma1以0.1位步长遍历整个取值范围，同时，也让ma2如此做。这样，ma1和ma2尝试完所有的可能性后，就能找到最佳的参数，作为技术分析交易系统的参数。栅格点搜索是机器学习中常见的超参数选择的方法，其优点是准确、全面，缺点是速度慢。如果我们需要执行对技术分析交易系统进行参数选择这样的任务，如果这个技术分析系统所需参数不多，则可使用栅格点搜索的方法来进行参数选择，否则，栅格点搜索可能会变得不可做。
除了栅格点搜索外，随机搜索（random search）也是机器学习常见的参数选择的方法，亦可使用模拟量子退火（simulated annealing）来进行改进。
不过，本文将使用贝叶斯优化（bayesian optimization）来进行参数选择。贝叶斯优化是当前机器学习、深度学习、数据挖掘领域中，应用最为广泛的超参数（hyper parameter）优化手段。它是一种基于Sequential model-based optimization的优化算法。
[#todo SMBO算法]
贝叶斯优化是非常实用的算法，应用非常广泛，对于需要较高成本进行效果验证的算法优化过程的调参效果优秀。人工智能战胜人类职业围棋九段的alphago就使用了贝叶斯优化的方法进行参数优化[silver2016]。
与真正市场中的技术分析交易系统的参数选择有一定相似性。
4.1.3 贝叶斯优化与技术分析交易系统迭代优化的相似性
SMBO算法[#todo 前文算法]是贝叶斯优化的基本形式，这个算法的核心是找到一个模型，通常是基于统计机器学习的，使得我们可以根据以往的结果来预判可能的结果优秀的参数。目前，常见的模型可以是高斯过程（Gaussian process）甚至可能是随机森林（random forest)或神经网络（feed-forward neural network）。贝叶斯优化的流程是，从一个参数的实例出发，通过模型来判断可能的结果优秀的下一个参数实例。随后，进行成本较高的结果判断得出$(x_i,y_i)$，再根据新的信息，修正以往的判断模型。再从当前的参数实例出发，寻找下一个可能结果优秀的参数实例，以此类推。
而技术分析参数的形成也是如此。
经验丰富的技术分析者，一开始会使用市场上流传的默认参数，随着时间的推进，他们会观察市场的情况，以此来训练大脑中的真正的生物神经网络。再运用这个神经网络来寻找下一个可能的结果优秀的参数。
[#todo 技术分析可能的参数优化路线]
真实的技术分析流程中，参数的定义是甚至可以是更为广泛的，参数的数值也是可变的。

4.1.4 模型堆叠
成熟的技术分析交易者往往并不依赖于一套交易系统。战胜了人类围棋职业九段的alphago[silver2016]使用了两套决策系统，一套是基于神经网络的，另一套则是基于传统蒙特卡洛树搜索的。成熟的技术分析交易者往往会融合很多套交易系统，互相参考，以得出稳妥的结论。
从机器学习的角度进行分析，这种交易系统的融合可理解为模型的堆叠（stacking）。机器学习理论证明，训练多个学习器（learning），把弱的学习器组合起来，通常可以达到更好的预测性能。具体而言，套袋法（bagging）可以在预测偏差不变的情况下，有效降低预测方差。而模型增强（boosting）方法，例如，adaboost或GBDT可理解为将新的学习器用于拟合负梯度，实质是一种梯度下降的方法。集成学习在各类数据竞赛中大放异彩。
简单的堆叠（stacking）模型数量较小，力量可能不如套袋法抑或是模型增强，但如果技术分析派

bayes_opt